(()=>{"use strict";let e=document.querySelector(".calendar"),t=document.querySelectorAll(".button-dropdown--calendar"),n=e.querySelector(".button-activity__apply--calendar"),a=e.querySelector(".button-activity__cleanup--calendar"),r=new Date,l=r.getMonth(),c=r.getFullYear();const u=document.querySelectorAll(".calendar__date-number"),o=document.querySelector(".calendar__previous"),d=document.querySelector(".calendar__next"),i=document.querySelector(".calendar__month"),s={0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"};let v=document.getElementById("date-in"),g=document.getElementById("date-out"),m=document.querySelector("input[name=arrival-date]");t.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),e.classList.toggle("hidden")}))})),function(t=0){const r=(e,t)=>{const n=new Date(t,e+1,0).getDate();let a=new Date(t,e).getDay();0===a&&(a=7),i.innerText=`${s[e]} ${t}`,u.forEach(((r,l)=>{const c=l+1-a;r.innerText=c>-1&&c<n?c+1:"";const u=new Date;u.getMonth()===e&&u.getFullYear()===t&&u.getDate()===l+1-(a-1)?r.classList.add("calendar__date-number--today"):r.classList.remove("calendar__date-number--today")}))},_=()=>{s[l]=2===l||7===l?s[l]+"а":s[l].slice(0,-1)+"я"},h=()=>{u.forEach((e=>{e.classList.remove("calendar__date-number--current"),e.classList.remove("calendar__date-number--in-range")}))};o.addEventListener("click",(e=>{e.preventDefault(),0===l?(l=11,c--):l--,r(l,c),_(),h()})),d.addEventListener("click",(e=>{e.preventDefault(),11===l?(l=0,c++):l++,r(l,c),_(),h()})),r(l,c);let y=Array.from(u);u.forEach((e=>{e.addEventListener("click",(function(){let n;function a(e){return n[e].textContent.length<2?"0"+n[e].textContent:n[e].textContent}_(),document.querySelectorAll(".calendar__date-number--current").length>1&&(u.forEach((e=>{e.classList.remove("calendar__date-number--current")})),u.forEach((e=>{e.classList.remove("calendar__date-number--in-range")}))),e.classList.add("calendar__date-number--current"),n=document.querySelectorAll(".calendar__date-number--current");let r=(l+1).toString().length<2?"0"+(l+1).toString():(l+1).toString();if(0===t?v.value=`${a(0)}.${r}.${c}`:m.value=`${a(0)} ${s[l].toLowerCase()}`,n.length>1){let e=y.indexOf(n[0]),o=y.indexOf(n[1]);for(e=y.indexOf(n[0]);e<o-1;e++)u[e+1].classList.add("calendar__date-number--in-range");n[0].classList.add("calendar__date-number--start"),n[1].classList.add("calendar__date-number--end"),0===t?g.value=`${a(1)}.${r}.${c}`:m.value=m.value+" - "+a(1)+" "+s[l].toLowerCase()}}))})),n.addEventListener("click",(()=>{e.classList.add("hidden")})),a.addEventListener("click",(()=>{0===t?(v.value="",g.value=""):m.value="",h()}))}(1);let _=document.querySelector(".filter-comfort"),h=_.querySelector(".counter"),y=_.querySelector(".button-dropdown--counter"),S=_.querySelectorAll(".num"),f=_.querySelectorAll(".inc"),E=_.querySelectorAll(".dec"),L=_.querySelector(".button-activity__apply"),b=_.querySelector(".button-activity__cleanup"),$=document.getElementById("comfort"),q=_.querySelectorAll(".counter__column--title");var p;p=h,y.addEventListener("click",(e=>{e.preventDefault(),p.classList.toggle("hidden")})),function(e,t,n,a,r,l,c=0,u){t.forEach((function(t,n){t.addEventListener("click",(t=>{t.preventDefault();let a=0;+e[n].value<99&&(e[n].value=Number(e[n].value)+1),e.forEach((e=>{a+=Number(e.value)})),a>0&&(r.style.display="block")}))})),n.forEach((function(t,n){t.addEventListener("click",(t=>{let a=0;t.preventDefault(),+e[n].value>0&&(e[n].value=+e[n].value-1),e.forEach((e=>{a+=Number(e.value)})),0===a&&(r.style.display="none")}))})),a.addEventListener("click",(()=>{let t=0;if(e.forEach((e=>{t+=Number(e.value)})),0===c){let n;n=Number(e[e.length-1].value),t-=n,function(e,t,n){e>0&&(1===e||e>20&&"1"===String(e).charAt(String(e).length-1)?n.value=`${e} гость`:e>1&&e<5||e>20&&("2"===String(e).charAt(String(e).length-1)||"3"===String(e).charAt(String(e).length-1)||"4"===String(e).charAt(String(e).length-1))?n.value=`${e} гостя`:n.value=`${e} гостей`),t>0&&(1===t||t>20&&"1"===String(t).charAt(String(t).length-1)?n.value=`${n.value}, ${t} младенец`:t>1&&t<5||t>20&&("2"===String(t).charAt(String(t).length-1)||"3"===String(t).charAt(String(t).length-1)||"4"===String(t).charAt(String(t).length-1))?n.value=`${n.value}, ${t} младенца`:n.value=`${n.value}, ${t} младенцев`)}(t,n,l)}else l.value=`${e[0].value} ${u[0].textContent}, ${e[1].value} ${u[1].textContent}, ${e[2].value} ${u[2].textContent}`})),r.addEventListener("click",(t=>{l.value="",e.forEach((e=>{e.value=0})),r.style.display="none"}))}(S,f,E,L,b,$,1,q)})();