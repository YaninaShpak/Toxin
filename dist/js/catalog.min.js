(()=>{"use strict";let e=document.querySelector(".calendar"),t=document.querySelectorAll(".button-dropdown--calendar"),a=e.querySelector(".button-activity__apply--calendar"),r=e.querySelector(".button-activity__cleanup--calendar"),n=new Date,l=n.getMonth(),s=n.getFullYear();const i=document.querySelectorAll(".calendar__date-number"),c=document.querySelector(".calendar__previous"),d=document.querySelector(".calendar__next"),o=document.querySelector(".calendar__month"),u={0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"};let _=document.getElementById("date-in"),g=document.getElementById("date-out"),m=document.querySelector("input[name=arrival-date]"),p=document.querySelector(".catalog-content__button"),v=document.querySelector(".filter__button--close"),h=document.querySelector(".filter"),b=document.querySelector(".catalog");t.forEach((t=>{t.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),e.classList.toggle("hidden")}))})),function(t=0){const n=(e,t)=>{const a=new Date(t,e+1,0).getDate();let r=new Date(t,e).getDay();0===r&&(r=7),o.innerText=`${u[e]} ${t}`,i.forEach(((n,l)=>{const s=l+1-r;n.innerText=s>-1&&s<a?s+1:"";const i=new Date;i.getMonth()===e&&i.getFullYear()===t&&i.getDate()===l+1-(r-1)?n.classList.add("calendar__date-number--today"):n.classList.remove("calendar__date-number--today")}))},p=()=>{u[l]=2===l||7===l?u[l]+"а":u[l].slice(0,-1)+"я"},v=()=>{i.forEach((e=>{e.classList.remove("calendar__date-number--current"),e.classList.remove("calendar__date-number--in-range")}))};c.addEventListener("click",(e=>{e.preventDefault(),0===l?(l=11,s--):l--,n(l,s),p(),v()})),d.addEventListener("click",(e=>{e.preventDefault(),11===l?(l=0,s++):l++,n(l,s),p(),v()})),n(l,s);let h=Array.from(i);i.forEach((e=>{e.addEventListener("click",(function(){let a;function r(e){return a[e].textContent.length<2?"0"+a[e].textContent:a[e].textContent}p(),document.querySelectorAll(".calendar__date-number--current").length>1&&(i.forEach((e=>{e.classList.remove("calendar__date-number--current")})),i.forEach((e=>{e.classList.remove("calendar__date-number--in-range")}))),e.classList.add("calendar__date-number--current"),a=document.querySelectorAll(".calendar__date-number--current");let n=(l+1).toString().length<2?"0"+(l+1).toString():(l+1).toString();if(0===t?_.value=`${r(0)}.${n}.${s}`:m.value=`${r(0)} ${u[l].toLowerCase()}`,a.length>1){let e=h.indexOf(a[0]),c=h.indexOf(a[1]);for(e=h.indexOf(a[0]);e<c-1;e++)i[e+1].classList.add("calendar__date-number--in-range");a[0].classList.add("calendar__date-number--start"),a[1].classList.add("calendar__date-number--end"),0===t?g.value=`${r(1)}.${n}.${s}`:m.value=m.value+" - "+r(1)+" "+u[l].toLowerCase()}}))})),a.addEventListener("click",(()=>{e.classList.add("hidden")})),r.addEventListener("click",(()=>{0===t?(_.value="",g.value=""):m.value="",v()}))}(1),document.addEventListener("keydown",(t=>{"Escape"!==t.code||e.classList.contains("hidden")||e.classList.add("hidden")})),document.addEventListener("click",(a=>{a.target==e||e.contains(a.target)||a.target===t[0]||a.target===t[1]||e.classList.contains("hidden")||e.classList.add("hidden")}));let y=document.querySelector(".filter-comfort"),f=y.querySelector(".counter"),S=y.querySelector(".button-dropdown--counter"),L=y.querySelectorAll(".num"),k=y.querySelectorAll(".inc"),$=y.querySelectorAll(".dec"),E=y.querySelector(".button-activity__apply"),w=y.querySelector(".button-activity__cleanup"),q=document.getElementById("comfort"),x=y.querySelectorAll(".counter__column--title");var A;var j;A=f,S.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),A.classList.toggle("hidden")})),function(e,t,a,r,n,l,s=0,i){t.forEach((function(t,a){t.addEventListener("click",(t=>{t.preventDefault();let r=0;+e[a].value<99&&(e[a].value=Number(e[a].value)+1),e.forEach((e=>{r+=Number(e.value)})),r>0&&(n.style.display="block")}))})),a.forEach((function(t,a){t.addEventListener("click",(t=>{let r=0;t.preventDefault(),+e[a].value>0&&(e[a].value=+e[a].value-1),e.forEach((e=>{r+=Number(e.value)})),0===r&&(n.style.display="none")}))})),r.addEventListener("click",(()=>{let t=0;if(e.forEach((e=>{t+=Number(e.value)})),0===s){let a;a=Number(e[e.length-1].value),t-=a,function(e,t,a){e>0&&(1===e||e>20&&"1"===String(e).charAt(String(e).length-1)?a.value=`${e} гость`:e>1&&e<5||e>20&&("2"===String(e).charAt(String(e).length-1)||"3"===String(e).charAt(String(e).length-1)||"4"===String(e).charAt(String(e).length-1))?a.value=`${e} гостя`:a.value=`${e} гостей`),t>0&&(1===t||t>20&&"1"===String(t).charAt(String(t).length-1)?a.value=`${a.value}, ${t} младенец`:t>1&&t<5||t>20&&("2"===String(t).charAt(String(t).length-1)||"3"===String(t).charAt(String(t).length-1)||"4"===String(t).charAt(String(t).length-1))?a.value=`${a.value}, ${t} младенца`:a.value=`${a.value}, ${t} младенцев`)}(t,a,l)}else l.value=`${e[0].value} ${i[0].textContent}, ${e[1].value} ${i[1].textContent}, ${e[2].value} ${i[2].textContent}`;document.querySelectorAll(".counter").forEach((e=>{e.classList.add("hidden")}))})),n.addEventListener("click",(t=>{l.value="",e.forEach((e=>{e.value=0})),n.style.display="none"}))}(L,k,$,E,w,q,1,x),p.addEventListener("click",(()=>{h.classList.remove("hidden"),b.classList.add("hidden"),p.classList.add("hidden")})),v.addEventListener("click",(()=>{h.classList.add("hidden"),b.classList.remove("hidden"),p.classList.remove("hidden")})),j=[{img_link:"img/content/img-apartment/888_apt.jpg",img_alt:"Фото номера 888",number_apt:"№ 888",lux:"люкс",price:"9 990",stars:["star","star","star","star","star"],reviews:"145"},{img_link:"img/content/img-apartment/840_apt.jpg",img_alt:"Фото номера 840",number_apt:"№ 840",lux:"",price:"9 900",stars:["star","star","star","star","star_border"],reviews:"65"},{img_link:"img/content/img-apartment/980_apt.jpg",img_alt:"Фото номера 980",number_apt:"№ 980",lux:"люкс",price:"8 500",stars:["star","star","star","star_border","star_border"],reviews:"35"},{img_link:"img/content/img-apartment/856_apt.jpg",img_alt:"Фото номера 856",number_apt:"№ 856",lux:"",price:"7 300",stars:["star","star","star","star","star"],reviews:"19"},{img_link:"img/content/img-apartment/740_apt.jpg",img_alt:"Фото номера 740",number_apt:"№ 740",lux:"",price:"6 000",stars:["star","star","star","star","star_border"],reviews:"44"},{img_link:"img/content/img-apartment/982_apt.jpg",img_alt:"Фото номера 982",number_apt:"№ 982",lux:"",price:"5 800",stars:["star","star","star","star_border","star_border"],reviews:"56"},{img_link:"img/content/img-apartment/678_apt.jpg",img_alt:"Фото номера 678",number_apt:"№ 678",lux:"",price:"5 500",stars:["star","star","star","star","star"],reviews:"45"},{img_link:"img/content/img-apartment/450_apt.jpg",img_alt:"Фото номера 450",number_apt:"№ 450",lux:"",price:"5 300",stars:["star","star","star","star","star_border"],reviews:"39"},{img_link:"img/content/img-apartment/350_apt.jpg",img_alt:"Фото номера 350",number_apt:"№ 350",lux:"",price:"5 000",stars:["star","star","star","star_border","star_border"],reviews:"77"},{img_link:"img/content/img-apartment/666_apt.jpg",img_alt:"Фото номера 666",number_apt:"№ 666",lux:"",price:"5 000",stars:["star","star","star","star","star"],reviews:"25"},{img_link:"img/content/img-apartment/444_apt.jpg",img_alt:"Фото номера 444",number_apt:"№ 444",lux:"",price:"5 000",stars:["star","star","star","star_border","star_border"],reviews:"15"},{img_link:"img/content/img-apartment/352_apt.jpg",img_alt:"Фото номера 352",number_apt:"№ 352",lux:"",price:"5 000",stars:["star","star","star","star_border","star_border"],reviews:"55"}],document.querySelector(".catalog").insertAdjacentHTML("afterbegin",`\n  <div class="catalog__wrapper">${function(e){return e.map((e=>{return`\n  <div class="apt-card">\n  <div class="apt-card__slider">\n    <img class="apt-card__img" src=${e.img_link} alt=${e.img_alt}>\n    <div class="slider-toggle apt-card__toggle">\n      <ul class="slider-toggle__list list-reset">\n        <li class="slider-toggle__item">\n        <a class="slider-toggle__link slider-toggle__link--current" href="#">\n          <span class="visually-hidden">Текущая фотография номера</span>\n        </a>\n        </li>\n        <li class="slider-toggle__item">\n        <a class="slider-toggle__link" href="#"><span class="visually-hidden">Вторая фотография номера</span></a>\n        </li>\n        <li class="slider-toggle__item">\n        <a class="slider-toggle__link" href="#"><span class="visually-hidden">Третья фотография номера</span></a>\n        </li>\n        <li class="slider-toggle__item">\n        <a class="slider-toggle__link" href="#"><span class="visually-hidden">Последняя фотография номера</span></a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="apt-card__wrapper">\n    <div class="apt-card__info">\n      <p class="apt-card__number">\n        <a class="apt-card__link apt-card__link--info" href="apartment-details.html">${e.number_apt}</a>\n        <span class="apt-card__lux">${e.lux}</span>\n      </p>\n      <p class="apt-card__price">\n        <span>${e.price} ₽</span>\n        в сутки\n      </p>\n    </div>\n    <div class="apt-card__reviews">\n      <p class="apt-card__rating">\n        ${t=e.stars,t.map((e=>`<span class="material-icons apt-card__star">${e}</span>`)).join(" ")}\n      </p>\n      <p class="apt-card__ammount-reviews">\n        <a class="apt-card__link apt-card__link--reviews" href="">\n          <span>${e.reviews}</span>\n          Отзывов\n        </a>\n      </p>\n    </div>\n  </div>\n</div>\n  `;var t})).join(" ")}(j)}</div>\n`)})();