(()=>{"use strict";let e=document.querySelector(".calendar"),t=document.querySelectorAll(".button-dropdown--calendar"),n=e.querySelector(".button-activity__apply--calendar"),a=e.querySelector(".button-activity__cleanup--calendar"),r=new Date,l=r.getMonth(),c=r.getFullYear();const d=document.querySelectorAll(".calendar__date-number"),u=document.querySelector(".calendar__previous"),o=document.querySelector(".calendar__next"),i=document.querySelector(".calendar__month"),s={0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"};let v=document.getElementById("date-in"),m=document.getElementById("date-out"),g=document.querySelector("input[name=arrival-date]"),_=document.querySelector(".catalog-content__button"),h=document.querySelector(".filter__button--close"),y=document.querySelector(".filter"),S=document.querySelector(".catalog");t.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),e.classList.toggle("hidden")}))})),function(t=0){const r=(e,t)=>{const n=new Date(t,e+1,0).getDate();let a=new Date(t,e).getDay();0===a&&(a=7),i.innerText=`${s[e]} ${t}`,d.forEach(((r,l)=>{const c=l+1-a;r.innerText=c>-1&&c<n?c+1:"";const d=new Date;d.getMonth()===e&&d.getFullYear()===t&&d.getDate()===l+1-(a-1)?r.classList.add("calendar__date-number--today"):r.classList.remove("calendar__date-number--today")}))},_=()=>{s[l]=2===l||7===l?s[l]+"а":s[l].slice(0,-1)+"я"},h=()=>{d.forEach((e=>{e.classList.remove("calendar__date-number--current"),e.classList.remove("calendar__date-number--in-range")}))};u.addEventListener("click",(e=>{e.preventDefault(),0===l?(l=11,c--):l--,r(l,c),_(),h()})),o.addEventListener("click",(e=>{e.preventDefault(),11===l?(l=0,c++):l++,r(l,c),_(),h()})),r(l,c);let y=Array.from(d);d.forEach((e=>{e.addEventListener("click",(function(){let n;function a(e){return n[e].textContent.length<2?"0"+n[e].textContent:n[e].textContent}_(),document.querySelectorAll(".calendar__date-number--current").length>1&&(d.forEach((e=>{e.classList.remove("calendar__date-number--current")})),d.forEach((e=>{e.classList.remove("calendar__date-number--in-range")}))),e.classList.add("calendar__date-number--current"),n=document.querySelectorAll(".calendar__date-number--current");let r=(l+1).toString().length<2?"0"+(l+1).toString():(l+1).toString();if(0===t?v.value=`${a(0)}.${r}.${c}`:g.value=`${a(0)} ${s[l].toLowerCase()}`,n.length>1){let e=y.indexOf(n[0]),u=y.indexOf(n[1]);for(e=y.indexOf(n[0]);e<u-1;e++)d[e+1].classList.add("calendar__date-number--in-range");n[0].classList.add("calendar__date-number--start"),n[1].classList.add("calendar__date-number--end"),0===t?m.value=`${a(1)}.${r}.${c}`:g.value=g.value+" - "+a(1)+" "+s[l].toLowerCase()}}))})),n.addEventListener("click",(()=>{e.classList.add("hidden")})),a.addEventListener("click",(()=>{0===t?(v.value="",m.value=""):g.value="",h()}))}(1);let f=document.querySelector(".filter-comfort"),L=f.querySelector(".counter"),E=f.querySelector(".button-dropdown--counter"),b=f.querySelectorAll(".num"),$=f.querySelectorAll(".inc"),q=f.querySelectorAll(".dec"),p=f.querySelector(".button-activity__apply"),A=f.querySelector(".button-activity__cleanup"),k=document.getElementById("comfort"),D=f.querySelectorAll(".counter__column--title");var x;x=L,E.addEventListener("click",(e=>{e.preventDefault(),x.classList.toggle("hidden")})),function(e,t,n,a,r,l,c=0,d){t.forEach((function(t,n){t.addEventListener("click",(t=>{t.preventDefault();let a=0;+e[n].value<99&&(e[n].value=Number(e[n].value)+1),e.forEach((e=>{a+=Number(e.value)})),a>0&&(r.style.display="block")}))})),n.forEach((function(t,n){t.addEventListener("click",(t=>{let a=0;t.preventDefault(),+e[n].value>0&&(e[n].value=+e[n].value-1),e.forEach((e=>{a+=Number(e.value)})),0===a&&(r.style.display="none")}))})),a.addEventListener("click",(()=>{let t=0;if(e.forEach((e=>{t+=Number(e.value)})),0===c){let n;n=Number(e[e.length-1].value),t-=n,function(e,t,n){e>0&&(1===e||e>20&&"1"===String(e).charAt(String(e).length-1)?n.value=`${e} гость`:e>1&&e<5||e>20&&("2"===String(e).charAt(String(e).length-1)||"3"===String(e).charAt(String(e).length-1)||"4"===String(e).charAt(String(e).length-1))?n.value=`${e} гостя`:n.value=`${e} гостей`),t>0&&(1===t||t>20&&"1"===String(t).charAt(String(t).length-1)?n.value=`${n.value}, ${t} младенец`:t>1&&t<5||t>20&&("2"===String(t).charAt(String(t).length-1)||"3"===String(t).charAt(String(t).length-1)||"4"===String(t).charAt(String(t).length-1))?n.value=`${n.value}, ${t} младенца`:n.value=`${n.value}, ${t} младенцев`)}(t,n,l)}else l.value=`${e[0].value} ${d[0].textContent}, ${e[1].value} ${d[1].textContent}, ${e[2].value} ${d[2].textContent}`})),r.addEventListener("click",(t=>{l.value="",e.forEach((e=>{e.value=0})),r.style.display="none"}))}(b,$,q,p,A,k,1,D),_.addEventListener("click",(()=>{y.classList.remove("hidden"),S.classList.add("hidden"),_.classList.add("hidden")})),h.addEventListener("click",(()=>{y.classList.add("hidden"),S.classList.remove("hidden"),_.classList.remove("hidden")}))})();