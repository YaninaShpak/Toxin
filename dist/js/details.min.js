(()=>{"use strict";let e=document.querySelector(".calendar"),t=document.querySelectorAll(".button-dropdown--calendar"),n=e.querySelector(".button-activity__apply--calendar"),a=e.querySelector(".button-activity__cleanup--calendar"),r=new Date,d=r.getMonth(),c=r.getFullYear();const l=document.querySelectorAll(".calendar__date-number"),o=document.querySelector(".calendar__previous"),s=document.querySelector(".calendar__next"),u=document.querySelector(".calendar__month"),i={0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"};let m=document.getElementById("date-in"),_=document.getElementById("date-out"),v=document.querySelector("input[name=arrival-date]");t.forEach((t=>{t.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),e.classList.toggle("hidden")}))})),function(t=0){const r=(e,t)=>{const n=new Date(t,e+1,0).getDate();let a=new Date(t,e).getDay();0===a&&(a=7),u.innerText=`${i[e]} ${t}`,l.forEach(((r,d)=>{const c=d+1-a;r.innerText=c>-1&&c<n?c+1:"";const l=new Date;l.getMonth()===e&&l.getFullYear()===t&&l.getDate()===d+1-(a-1)?r.classList.add("calendar__date-number--today"):r.classList.remove("calendar__date-number--today")}))},g=()=>{i[d]=2===d||7===d?i[d]+"а":i[d].slice(0,-1)+"я"},L=()=>{l.forEach((e=>{e.classList.remove("calendar__date-number--current"),e.classList.remove("calendar__date-number--in-range")}))};o.addEventListener("click",(e=>{e.preventDefault(),0===d?(d=11,c--):d--,r(d,c),g(),L()})),s.addEventListener("click",(e=>{e.preventDefault(),11===d?(d=0,c++):d++,r(d,c),g(),L()})),r(d,c);let y=Array.from(l);l.forEach((e=>{e.addEventListener("click",(function(){let n;function a(e){return n[e].textContent.length<2?"0"+n[e].textContent:n[e].textContent}g(),document.querySelectorAll(".calendar__date-number--current").length>1&&(l.forEach((e=>{e.classList.remove("calendar__date-number--current")})),l.forEach((e=>{e.classList.remove("calendar__date-number--in-range")}))),e.classList.add("calendar__date-number--current"),n=document.querySelectorAll(".calendar__date-number--current");let r=(d+1).toString().length<2?"0"+(d+1).toString():(d+1).toString();if(0===t?m.value=`${a(0)}.${r}.${c}`:v.value=`${a(0)} ${i[d].toLowerCase()}`,n.length>1){let e=y.indexOf(n[0]),o=y.indexOf(n[1]);for(e=y.indexOf(n[0]);e<o-1;e++)l[e+1].classList.add("calendar__date-number--in-range");n[0].classList.add("calendar__date-number--start"),n[1].classList.add("calendar__date-number--end"),0===t?_.value=`${a(1)}.${r}.${c}`:v.value=v.value+" - "+a(1)+" "+i[d].toLowerCase()}}))})),n.addEventListener("click",(()=>{e.classList.add("hidden")})),a.addEventListener("click",(()=>{0===t?(m.value="",_.value=""):v.value="",L()}))}(0),document.addEventListener("keydown",(t=>{"Escape"!==t.code||e.classList.contains("hidden")||e.classList.add("hidden")})),document.addEventListener("click",(n=>{n.target==e||e.contains(n.target)||n.target===t[0]||n.target===t[1]||e.classList.contains("hidden")||e.classList.add("hidden")}))})();